<!DOCTYPE html>
<html>
<head>
    <title>Scene Images Test</title>
</head>
<body>
    <h1>Scene Images Loading Test</h1>
    <div id="result"></div>
    
    <script>
        // 模拟前端的API调用
        async function testSceneImages() {
            try {
                const response = await fetch('http://localhost:1198/api/load/scene/images?projectName=猛鬼世界');
                const data = await response.json();
                
                const resultDiv = document.getElementById('result');
                resultDiv.innerHTML = `
                    <h2>API Response:</h2>
                    <pre>${JSON.stringify(data, null, 2)}</pre>
                    <h2>Scene Images (${data.scene_images ? data.scene_images.length : 0}):</h2>
                `;
                
                if (data.scene_images && data.scene_images.length > 0) {
                    data.scene_images.forEach((img, index) => {
                        const imgDiv = document.createElement('div');
                        imgDiv.innerHTML = `
                            <h3>Scene ${img.scene_index}:</h3>
                            <img src="${img.image_url}" style="max-width: 200px; height: auto;" onerror="this.style.display='none'; this.nextSibling.style.display='block';">
                            <div style="display:none; color:red;">Failed to load image</div>
                        `;
                        resultDiv.appendChild(imgDiv);
                    });
                } else {
                    resultDiv.innerHTML += '<p style="color:red;">No scene images found</p>';
                }
            } catch (error) {
                document.getElementById('result').innerHTML = `<p style="color:red;">Error: ${error.message}</p>`;
            }
        }
        
        // 页面加载后执行测试
        window.onload = testSceneImages;
    </script>
</body>
</html>